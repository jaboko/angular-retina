/*! angular-retina - v0.3.1 - 2015-08-11
* https://github.com/jrief/angular-retina
* Copyright (c) 2015 Jacob Rief; Licensed MIT */
!function(a,b){"use strict";var c="@2x",d=/^data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,e=/.*/,f=a.module("ngRetina",[]).config(["$provide",function(a){a.decorator("ngSrcDirective",["$delegate",function(a){return a[0].compile=function(a,b){},a}])}]);f.provider("ngRetina",function(){this.setInfix=function(a){c=a},this.setPattern=function(a){e=new RegExp(a)},this.$get=a.noop}),f.directive("ngSrc",["$window","$http","$q",function(a,b,f){function g(a){var b=a.split("/"),d=b.pop(),e=d.split(".");return e.length<2?a+c:(e[e.length-2]+=c,b.push(e.join(".")),b.join("/"))}var h=parseInt((/msie (\d+)/.exec(a.navigator.userAgent.toLowerCase())||[])[1],10),i=function(){var b="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return a.devicePixelRatio>1?!0:a.matchMedia&&a.matchMedia(b).matches}();return function(c,j,k){function l(a){k.$set("src",a),h&&j.prop("src",a)}function m(a){var b=f.defer(),c=new Image;return c.onload=function(){b.resolve({width:this.width,height:this.height})},c.src=a,b.promise}function n(c){if(!e.test(c))return void l(c);var d=a.sessionStorage.getItem(c);d?l(d):(d=g(c),b.head(d).success(function(b,e){l(d),a.sessionStorage.setItem(c,d)}).error(function(b,d,e,f){l(c),a.sessionStorage.setItem(c,c)}))}k.$observe("ngSrc",function(b){if(b)if(i&&"object"==typeof a.sessionStorage&&"IMG"===j[0].tagName&&!b.match(d)){var c=!k.hasOwnProperty(c)||k.autoSize?!0:!1;c?m(b).then(function(a){k.$set("width",a.width),k.$set("height",a.height),h&&(j.prop("width",a.width),j.prop("height",a.height)),n(b)}):n(b)}else l(b)})}}])}(window.angular);